<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversor: DÃ³lar â†’ Real â†’ Guarani</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Vue 3 CDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
    <style>
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fade-in {
            animation: fadeIn 0.5s;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-500 to-purple-600 min-h-screen flex justify-center items-center p-5">
    <div id="app" class="bg-white rounded-3xl shadow-2xl p-10 max-w-2xl w-full">
        <h1 class="text-gray-800 text-center mb-2 text-3xl font-bold">ğŸ’± Conversor de Moedas</h1>
        <p class="text-center text-gray-600 mb-8 text-sm">USD â†’ BRL â†’ PYG</p>

        <div class="mb-8">
            <label for="usdAmount" class="block text-gray-600 font-semibold mb-2 text-sm">ğŸ’µ Valor em DÃ³lares (USD)</label>
            <input 
                type="number" 
                id="usdAmount" 
                v-model="usdAmount"
                @keypress.enter="convertCurrency"
                placeholder="Digite o valor em USD" 
                min="0" 
                step="0.01"
                class="w-full p-4 border-2 border-gray-300 rounded-xl text-lg outline-none transition-all focus:border-indigo-500 focus:ring-4 focus:ring-indigo-100">
        </div>

        <button 
            @click="convertCurrency"
            class="w-full p-4 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-xl text-lg font-semibold cursor-pointer transition-all mb-8 hover:-translate-y-0.5 hover:shadow-xl active:translate-y-0">
            ğŸ”„ Converter Moedas
        </button>

        <div v-if="loading" class="text-center text-indigo-500 mt-4">
            <p>â³ Buscando cotaÃ§Ãµes atualizadas...</p>
        </div>

        <div v-if="error" class="bg-red-50 text-red-700 p-4 rounded-xl mt-4 border-l-4 border-red-700">
            {{ error }}
        </div>

        <div v-if="showResults" class="fade-in">
            <div class="bg-gradient-to-r from-gray-100 to-gray-200 p-5 rounded-xl mb-4 border-l-4 border-green-500">
                <div class="text-sm text-gray-600 mb-1">ğŸ’µ DÃ³lares Americanos</div>
                <div class="text-2xl font-bold text-gray-800">
                    <span>{{ formatNumber(results.usd) }}</span>
                    <span class="text-lg text-gray-600 ml-1">USD</span>
                </div>
            </div>

            <div class="text-center text-indigo-500 text-2xl my-2">â¬‡ï¸</div>

            <div class="bg-gradient-to-r from-gray-100 to-gray-200 p-5 rounded-xl mb-4 border-l-4 border-blue-500">
                <div class="text-sm text-gray-600 mb-1">ğŸ‡§ğŸ‡· Reais Brasileiros</div>
                <div class="text-2xl font-bold text-gray-800">
                    <span>{{ formatNumber(results.brl) }}</span>
                    <span class="text-lg text-gray-600 ml-1">BRL</span>
                </div>
            </div>

            <div class="text-center text-indigo-500 text-2xl my-2">â¬‡ï¸</div>

            <div class="bg-gradient-to-r from-gray-100 to-gray-200 p-5 rounded-xl mb-4 border-l-4 border-red-500">
                <div class="text-sm text-gray-600 mb-1">ğŸ‡µğŸ‡¾ Guaranis Paraguaios</div>
                <div class="text-2xl font-bold text-gray-800">
                    <span>{{ formatNumber(results.pyg) }}</span>
                    <span class="text-lg text-gray-600 ml-1">PYG</span>
                </div>
            </div>

            <div class="bg-gray-50 p-4 rounded-xl mt-5 text-xs text-gray-600">
                <strong class="text-gray-800">ğŸ“Š Taxas de CÃ¢mbio:</strong><br>
                1 USD = {{ formatRate(rates.usdToBrl) }} BRL<br>
                1 USD = {{ formatRate(rates.usdToPyg) }} PYG<br>
                1 BRL = {{ formatRate(rates.brlToPyg) }} PYG<br>
                <small>Ãšltima atualizaÃ§Ã£o: {{ lastUpdate }}</small>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    usdAmount: 100,
                    loading: false,
                    error: '',
                    showResults: false,
                    results: {
                        usd: 0,
                        brl: 0,
                        pyg: 0
                    },
                    rates: {
                        usdToBrl: 0,
                        usdToPyg: 0,
                        brlToPyg: 0
                    },
                    lastUpdate: '-'
                }
            },
            methods: {
                async convertCurrency() {
                    if (!this.usdAmount || this.usdAmount <= 0) {
                        this.error = 'Por favor, digite um valor vÃ¡lido em dÃ³lares.';
                        return;
                    }

                    this.error = '';
                    this.showResults = false;
                    this.loading = true;

                    try {
                        const response = await fetch('https://open.er-api.com/v6/latest/USD');
                        
                        if (!response.ok) {
                            throw new Error('Erro ao buscar cotaÃ§Ãµes');
                        }

                        const data = await response.json();
                        
                        // Taxas de cÃ¢mbio
                        this.rates.usdToBrl = data.rates.BRL;
                        this.rates.usdToPyg = data.rates.PYG;
                        this.rates.brlToPyg = this.rates.usdToPyg / this.rates.usdToBrl;

                        // Calcular valores
                        this.results.usd = parseFloat(this.usdAmount);
                        this.results.brl = this.usdAmount * this.rates.usdToBrl;
                        this.results.pyg = this.usdAmount * this.rates.usdToPyg;

                        this.lastUpdate = data.date;
                        this.loading = false;
                        this.showResults = true;

                    } catch (error) {
                        this.loading = false;
                        this.error = 'Erro ao buscar cotaÃ§Ãµes. Tente novamente em alguns instantes.';
                        console.error('Erro:', error);
                    }
                },
                formatNumber(value) {
                    return value.toFixed(2);
                },
                formatRate(value) {
                    return this.rates.usdToPyg === value ? value.toFixed(2) : value.toFixed(4);
                }
            },
            mounted() {
                this.convertCurrency();
            }
        }).mount('#app');
    </script>
</body>
</html>